<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>الجدول الأول</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-4">

  <h2>عرض بيانات الميزان</h2>
  <table id="data-table" class="table table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>رقم السياره</th>
        <th>القيمة</th>
        <th>التاريخ</th>
      </tr>
    </thead>
    <tbody>
      <!-- سيتم ملء هذا الجدول ديناميكيًا -->
    </tbody>
  </table>
  <button id="load-more-btn" class="btn btn-primary w-100">تحميل المزيد</button>

  <script>
    let offset = 0; // البداية
    const limit = 5; // عدد الصفوف

    async function fetchData() {
      try {
        const response = await fetch(`/get-data?limit=${limit}&offset=${offset}`);
        const data = await response.json();

        const tableBody = document.querySelector('#data-table tbody');

        if (data.length === 0) {
          document.getElementById('load-more-btn').style.display = 'none';
          return;
        }

        data.forEach(row => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${row.id}</td>
            <td>${row.number}</td>
            <td>${row.data_value}</td>
            <td>${row.date}</td>
          `;
          tableBody.appendChild(tr);
        });

        offset += limit;

      } catch (error) {
        console.error('خطأ:', error);
      }
    }

    window.onload = fetchData;
    document.getElementById('load-more-btn').addEventListener('click', fetchData);
  </script>
</body>
</html>
